<div th:replace="fragment/head"></div>
<title>Artrickshaw | Manage Role</title>
<div th:replace="fragment/header"></div>
<div th:replace="fragment/sidebar"></div>

<!-- =============================================================== -->
<!-- %%%%%%%%%%%%%%%% View section Starts from Here %%%%%%%%%%%%%%%% -->
<!-- =============================================================== -->.


<div ng-app="UserRollModule" ng-controller="UserRollController" class="row">
  <div class="col-md-12 grid-margin stretch-card">
    <div class="card">
      <div class="card-body">
        <h3 class="card-title">User Permission</h3><br>
        <div class="table-responsive">

          <div class="col-md-4 page-action-user mb-3">
            <label for="userId" class="form-label">Users:<span style="color:red;font-weight:bold"> *</span></label>
            <select ng-disabled="form.id !== '' && form.id !== undefined && form.id !== null"
              class="form-control form-control-solid" ng-model="userId"
              ng-change="selectUser(userId)" style="width: 200px;"
              ng-options="user.id  as user.name for user in users" required>
              <option value="">Select Activity Name</option>
            </select>
          </div>

          <div class="fv-row mb-7">
            <table class="table align-middle table-row-dashed fs-6 gy-5 dataTable no-footer"
              style="border: 1px solid black;">
              <thead>
                <tr>
                  <th colspan="12" style="border: 1px solid black;color: black;font-weight: 700;text-align: center;">
                    Menu Permission</th>
                </tr>
              </thead>
              <tbody class="fw-semibold text-gray-600">
                <tr>
                  <td style="border: 1px solid black;color: black;font-weight: 700;text-align: center;">
                    <input type="checkbox" name="isAllSelected" ng-model="isAllSelected" ng-click="toggleAll()"
                      value="1"> &nbsp;&nbsp;Module
                  </td>
                  <td colspan="11" style="border: 1px solid black;color: black;font-weight: 700;text-align: center;">
                    Menu
                  </td>
                </tr>
                <tr ng-repeat="module in Permissions">
                  <td style="border: 1px solid black;padding-left: 10px;">
                    <input type="checkbox" name="module[]" ng-model="module_id[module.id]" value="{{module.id}}"
                      ng-click="toggleAllModuleWise(module.id,$index)">
                    &nbsp;{{module.name}}
                  </td>
                  <td ng-if="module_id[module.id] == true" style="border: 1px solid black;"
                    ng-repeat="(key, sub_module) in module.menu track by $index">
                    <span>
                      <input type="checkbox" name="submodule[]" ng-model="sub_module_id[sub_module.id]"
                        value="{{sub_module.id}}">
                      &nbsp;{{sub_module.name}}
                    </span>

                  </td>
                </tr>
            </table>
          </div>
        </div>

      </div>
      <button type="submit" ng-click="editSaveRole(userId)" class="btn btn-primary mt-2 mb-4"
        style="width: 200px; margin-left: auto; margin-right: auto !important;">Submit</button>
    </div>
  </div>

</div>

<!-- =============================================================== -->
<!-- %%%%%%%%%%%%%%%% View section END Here %%%%%%%%%%%%%%%% -->
<!-- =============================================================== -->

<!-- content-wrapper ends -->
<div th:replace="fragment/footer"></div>
<script src="private/userRoll.js" type="text/javascript"></script>